# Redirect all requests to public directory
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ /public/$1 [L]

# Deny access to sensitive files in root
<Files ".env">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.json">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.lock">
    Order allow,deny
    Deny from all
</Files>

# Deny access to directories
RedirectMatch 404 /\.git
RedirectMatch 404 /vendor
RedirectMatch 404 /src
RedirectMatch 404 /sql